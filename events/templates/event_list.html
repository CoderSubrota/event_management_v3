
<!DOCTYPE html>
<html lang="en">
<head>
    {% include "cdn/cdn.html" %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
</head>
<body>
    {% include "share/navbar.html" %} 
    {% block content %}
    <h1 class="text-2xl ms-4 font-bold my-4 text-white ">Event List</h1>
    <a href="{% url 'add_event' %}" class="bg-blue-500 my-2 ms-4 text-white px-4 py-2 rounded">Add Event</a>
    <table class="table-auto w-full my-14 border-collapse  text-blue-500 font-bold">
        <thead class="text-white">
            <tr class="bg-green-400">
                <th class="border px-4 py-2">Name</th>
                <th class="border px-4 py-2">Category</th>
                <th class="border px-4 py-2">Date</th>
                <th class="border px-4 py-2">Image</th>
                <th class="border px-4 py-2">Actions</th>
                <th class="border px-4 py-2">Make RSVP</th>
            </tr>
        </thead>
        <tbody>
            {% for event in events %}
            <tr>
                <td class="border px-4 py-2">{{ event.name }}</td>
                <td class="border px-4 py-2">{{ event.category.name }}</td>
                <td class="border px-4 py-2">{{ event.date }}</td>
                <td class="border px-4 py-2">
                    <img src={{ event.image.url }} alt="event image" class="h-20 w-20 rounded-full ring-4 ring-green-300"/>
                </td>
                <td class="border px-4 py-2">
                    <a href="{% url 'event_update' event.id %}" class="text-blue-500">Edit</a> |
                    <a href="{% url 'event_delete' event.id %}" class="text-red-500">Delete</a>
                </td>

                <td class="border px-4 py-2"> 
            {% if user.is_authenticated %}
              <form action="{% url 'rsvp_event' event.id %}" method="post">
                  {% csrf_token %}
               <button type="submit" class="hover:cursor-pointer bg-green-300 p-3 rounded-full text-pink-500 px-8">RSVP</button>
               </form>
             {% else %}
            <a href="{% url 'sign-in' %}">Login to RSVP</a>
              {% endif %}
           </td>
            </tr>
            {% empty %}


            <tr>
                <td colspan="4" class="text-center py-4">No events found.</td>
            </tr>
            
            {% endfor %}
        </tbody>
    </table>
    {% endblock %}
   
    {% include "share/footer.html" %}
</body>
</html>